<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Neovim: src/nvim/hashtab.h File Reference</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
<link href="http://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header class="navbar">
  <div class="container">
    <nav class="site-nav">
      <ul>
        <li><a href="http://neovim.io/">Neovim Home</a></li>
      </ul>
    </nav>
    <a href="index.html">
      <img src="logo-devdoc.png" class="logo" alt="Neovim Dev-Doc">
    </a>
  </div>
</header>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_bc030da22f6f77ebb27ffd39b609bafa.html">nvim</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">hashtab.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &quot;<a class="el" href="types_8h_source.html">nvim/types.h</a>&quot;</code><br />
</div>
<p><a href="hashtab_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhashitem__S.html">hashitem_S</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhashtable__S.html">hashtable_S</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa7b771a5887a558072e5fe1e9a73baba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8h.html#aa7b771a5887a558072e5fe1e9a73baba">HI_KEY_REMOVED</a>&#160;&#160;&#160;((<a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *)&amp;<a class="el" href="hashtab_8h.html#afe062c6bec386a8eb7d57dbb90497f1c">hash_removed</a>)</td></tr>
<tr class="separator:aa7b771a5887a558072e5fe1e9a73baba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6daf8b4e03c36362fcadf86a894e0528"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8h.html#a6daf8b4e03c36362fcadf86a894e0528">HASHITEM_EMPTY</a>(hi)</td></tr>
<tr class="separator:a6daf8b4e03c36362fcadf86a894e0528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e5d775b7f5b651b50a6c8d375630ec1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8h.html#a8e5d775b7f5b651b50a6c8d375630ec1">HT_INIT_SIZE</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a8e5d775b7f5b651b50a6c8d375630ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a724c34f74be3828fca9d6dff0ac18b0c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8h.html#a724c34f74be3828fca9d6dff0ac18b0c">HASHTAB_ITER</a>(<a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>,  hi,  code)</td></tr>
<tr class="separator:a724c34f74be3828fca9d6dff0ac18b0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7b00f34659dc168c35da7c824a12b4d0"><td class="memItemLeft" align="right" valign="top">typedef size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8h.html#a7b00f34659dc168c35da7c824a12b4d0">hash_T</a></td></tr>
<tr class="memdesc:a7b00f34659dc168c35da7c824a12b4d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for hash number (hash calculation result).  <a href="#a7b00f34659dc168c35da7c824a12b4d0">More...</a><br /></td></tr>
<tr class="separator:a7b00f34659dc168c35da7c824a12b4d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cd0b05f3eca10e7b37814dc38f06dad"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structhashitem__S.html">hashitem_S</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a></td></tr>
<tr class="separator:a0cd0b05f3eca10e7b37814dc38f06dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a211adabef8faee6c81eda3f6535b5779"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structhashtable__S.html">hashtable_S</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a></td></tr>
<tr class="separator:a211adabef8faee6c81eda3f6535b5779"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afe062c6bec386a8eb7d57dbb90497f1c"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hashtab_8h.html#afe062c6bec386a8eb7d57dbb90497f1c">hash_removed</a></td></tr>
<tr class="separator:afe062c6bec386a8eb7d57dbb90497f1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a6daf8b4e03c36362fcadf86a894e0528"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASHITEM_EMPTY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hi</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((hi)-&gt;hi_key == <a class="code" href="eval_8c.html#a1a05ede2ad100bf5de5dfa7ccdfa4397">NULL</a> \</div><div class="line">                            || (hi)-&gt;hi_key == (<a class="code" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *)&amp;<a class="code" href="hashtab_8h.html#afe062c6bec386a8eb7d57dbb90497f1c">hash_removed</a>)</div><div class="ttc" id="eval_8c_html_a1a05ede2ad100bf5de5dfa7ccdfa4397"><div class="ttname"><a href="eval_8c.html#a1a05ede2ad100bf5de5dfa7ccdfa4397">NULL</a></div><div class="ttdeci">return NULL</div><div class="ttdef"><b>Definition:</b> eval.c:9894</div></div>
<div class="ttc" id="hashtab_8h_html_afe062c6bec386a8eb7d57dbb90497f1c"><div class="ttname"><a href="hashtab_8h.html#afe062c6bec386a8eb7d57dbb90497f1c">hash_removed</a></div><div class="ttdeci">char hash_removed</div><div class="ttdef"><b>Definition:</b> hashtab.c:42</div></div>
<div class="ttc" id="types_8h_html_abdb7824437f4665a51798757139f570b"><div class="ttname"><a href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a></div><div class="ttdeci">unsigned char char_u</div><div class="ttdef"><b>Definition:</b> types.h:11</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a724c34f74be3828fca9d6dff0ac18b0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HASHTAB_ITER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">hi, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">code&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <a class="code" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">\</a></div><div class="line"><a class="code" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">      hashtab_T</a> *<span class="keyword">const</span> hi##ht_ = (<a class="code" href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a>); \</div><div class="line">      size_t hi##todo_ = hi##ht_-&gt;<a class="code" href="structhashtable__S.html#aac71aeb7efc3b3e22abd9d317beda534">ht_used</a>; <a class="code" href="funcs_8c.html#a8b9eb702eb3f9bcba3923532d1e801db">\</a></div><div class="line"><a class="code" href="funcs_8c.html#a8b9eb702eb3f9bcba3923532d1e801db">      for</a> (<a class="code" href="structhashitem__S.html">hashitem_T</a> *hi = hi##ht_-&gt;ht_array; hi##todo_; hi++) { <a class="code" href="encode_8c.html#afd641a0ad2f3dd6a8abc8c28400edef1">\</a></div><div class="line"><a class="code" href="encode_8c.html#afd641a0ad2f3dd6a8abc8c28400edef1">        if</a> (!<a class="code" href="hashtab_8h.html#a6daf8b4e03c36362fcadf86a894e0528">HASHITEM_EMPTY</a>(hi)) { \</div><div class="line">          hi##todo_--; \</div><div class="line">          { \</div><div class="line">            code \</div><div class="line">          } \</div><div class="line">        } \</div><div class="line">      } \</div><div class="line">    } <span class="keywordflow">while</span> (0)</div><div class="ttc" id="hashtab_8h_html_a6daf8b4e03c36362fcadf86a894e0528"><div class="ttname"><a href="hashtab_8h.html#a6daf8b4e03c36362fcadf86a894e0528">HASHITEM_EMPTY</a></div><div class="ttdeci">#define HASHITEM_EMPTY(hi)</div><div class="ttdef"><b>Definition:</b> hashtab.h:19</div></div>
<div class="ttc" id="encode_8c_html_afd641a0ad2f3dd6a8abc8c28400edef1"><div class="ttname"><a href="encode_8c.html#afd641a0ad2f3dd6a8abc8c28400edef1">if</a></div><div class="ttdeci">if(len)</div><div class="ttdef"><b>Definition:</b> encode.c:228</div></div>
<div class="ttc" id="funcs_8c_html_a8b9eb702eb3f9bcba3923532d1e801db"><div class="ttname"><a href="funcs_8c.html#a8b9eb702eb3f9bcba3923532d1e801db">for</a></div><div class="ttdeci">for(;;)</div><div class="ttdef"><b>Definition:</b> funcs.c:7752</div></div>
<div class="ttc" id="structhashtable__S_html_aac71aeb7efc3b3e22abd9d317beda534"><div class="ttname"><a href="structhashtable__S.html#aac71aeb7efc3b3e22abd9d317beda534">hashtable_S::ht_used</a></div><div class="ttdeci">size_t ht_used</div><div class="ttdef"><b>Definition:</b> hashtab.h:66</div></div>
<div class="ttc" id="hashtab_8h_html_a211adabef8faee6c81eda3f6535b5779"><div class="ttname"><a href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a></div><div class="ttdeci">struct hashtable_S hashtab_T</div></div>
<div class="ttc" id="eval_8c_html_adf9783680806b4c5c33fdcb6110cd334"><div class="ttname"><a href="eval_8c.html#adf9783680806b4c5c33fdcb6110cd334">ht</a></div><div class="ttdeci">hashtab_T * ht</div><div class="ttdef"><b>Definition:</b> eval.c:1974</div></div>
<div class="ttc" id="structhashitem__S_html"><div class="ttname"><a href="structhashitem__S.html">hashitem_S</a></div><div class="ttdef"><b>Definition:</b> hashtab.h:38</div></div>
</div><!-- fragment --><p>Iterate over a hashtab</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ht</td><td>Hashtab to iterate over. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">hi</td><td>Name of the variable with current hashtab entry. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">code</td><td>Cycle body. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa7b771a5887a558072e5fe1e9a73baba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HI_KEY_REMOVED&#160;&#160;&#160;((<a class="el" href="types_8h.html#abdb7824437f4665a51798757139f570b">char_u</a> *)&amp;<a class="el" href="hashtab_8h.html#afe062c6bec386a8eb7d57dbb90497f1c">hash_removed</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The address of "hash_removed" is used as a magic number for hi_key to indicate a removed item. </p>

</div>
</div>
<a class="anchor" id="a8e5d775b7f5b651b50a6c8d375630ec1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HT_INIT_SIZE&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initial size for a hashtable. Our items are relatively small and growing is expensive, thus start with 16. Must be a power of 2. This allows for storing 10 items (2/3 of 16) before a resize is needed. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a7b00f34659dc168c35da7c824a12b4d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef size_t <a class="el" href="hashtab_8h.html#a7b00f34659dc168c35da7c824a12b4d0">hash_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type for hash number (hash calculation result). </p>

</div>
</div>
<a class="anchor" id="a0cd0b05f3eca10e7b37814dc38f06dad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structhashitem__S.html">hashitem_S</a>  <a class="el" href="hashtab_8h.html#a0cd0b05f3eca10e7b37814dc38f06dad">hashitem_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Hashtable item.</p>
<p>Each item has a NUL terminated string key. A key can appear only once in the table.</p>
<p>A hash number is computed from the key for quick lookup. When the hashes of two different keys point to the same entry an algorithm is used to iterate over other entries in the table until the right one is found. To make the iteration work removed keys are different from entries where a key was never present.</p>
<p>Note that this does not contain a pointer to the key and another pointer to the value. Instead, it is assumed that the key is contained within the value, so that you can get a pointer to the value subtracting an offset from the pointer to the key. This reduces the size of this item by 1/3. </p>

</div>
</div>
<a class="anchor" id="a211adabef8faee6c81eda3f6535b5779"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structhashtable__S.html">hashtable_S</a>  <a class="el" href="hashtab_8h.html#a211adabef8faee6c81eda3f6535b5779">hashtab_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An array-based hashtable.</p>
<p>Keys are NUL terminated strings. They cannot be repeated within a table. Values are of any type.</p>
<p>The hashtable grows to accommodate more entries when needed. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="afe062c6bec386a8eb7d57dbb90497f1c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char hash_removed</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Magic number used for hashitem "hi_key" value indicating a deleted item</p>
<p>Only the address is used. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<footer>
  <div class="container">
    Generated on Wed Nov 11 2020 14:11:01 for Neovim by
    <a href="http://www.doxygen.org/index.html">Doxygen</a>
    1.8.11
  </div>
</footer>
</body>
</html>
